version: "2.0"
services:

#  centos-dotnet-6:
#    build: docker-centos-7-dotnet-6/.
#    image: dockercentos-dotnet-6
#    container_name: centos-dotnet-6
  
#  centos-dotnet-7:
#    build: docker-centos-7-dotnet-7/.
#    image: dockercentos-dotnet-7
#    container_name: centos-dotnet-7

  jfrog:
    build: artifactory-jfrog-latest/.
    image: jfrog
    container_name: artifactory-jfrog
    restart: always
    ports:
     - "8081:8081"
     - "8082:8082"
    environment:
     - INIT_MEM=4096m
     - MAX_MEM=8192m
    volumes:
     - jfrog_data:/var/opt/jfrog

#  mssql-server-2019:
#    build: mssql-2019/.
#    image: mssql-2019
#    container_name: mssql-server-2019
#    restart: always
#    ports:
#      - "1433:1433"
#    environment:
#      - ACCEPT_EULA=Y
#      - MSSQL_SA_PASSWORD=P@ssword123
#      - INIT_MEM=6144m
#      - MAX_MEM=8192m
#    volumes:
#      - mssql:/var/opt/mssql

#  nginx:
#    build: nginx/.
#    image: nginx
 #   container_name: nginx
#    restart: always
#    ports:
#     - "80:80"
#     - "443:443"
#    environment:
#     - INIT_MEM=512m
#     - MAX_MEM=1024m
#    volumes:
#     - nginx_conf:/etc/nginx

  jenkins:
    image: jenkins/jenkins:lts
    container_name: jenkins
    ports:
      - "8080:8080"
    environment:
      - JENKINS_OPTS="--prefix=/jenkins"
    volumes:
      - jenkins_home:/var/jenkins_home
    restart: always

  aws-nginx-nexus:
    build: aws-nginx-nexus/.
    image: nginx-nexus
    container_name: nginx-nexus
    restart: always
    ports:
     - "80:80"
     - "443:443"
    environment:
     - INIT_MEM=512m
     - MAX_MEM=1024m
    volumes:
     - nginx_conf:/etc/nginx

  nexus:
    image: sonatype/nexus3
    container_name: nexus3
    restart: always
    ports:
      - "8081:8081"
    volumes:
      - nexus-data:/nexus-data
    

volumes:
  jenkins_home:
  nexus-data:
  nginx_conf:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: /home/docker/volume/aws-nginx
  jfrog_data:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: /home/docker/volume/jfrog
  
networks:
  default: